# 技术栈设计 提示词（设计/优化）完整报告

## 报告日期
2026-01-11

## 核心需求
优化 `.github/prompts/design-tech-stack.prompt.md` 提示词文件，并为其设计合适的头部，使其结构化、可执行且便于验证与落地。

## 目标文件上下文详情
- 文件路径： .github/prompts/design-tech-stack.prompt.md
- 文件用途：作为项目内部用于自动/半自动生成技术栈设计文档的提示词命令，供架构师或 AI 助手使用
- 上下文核心：需输出可直接落地的技术栈选择与实现要点，且文档需保存到 `docs/` 目录；提示词需包含角色、原则、输入要求、执行流程与输出标准
- 适配逻辑：提示词正文遵循“角色-目标-约束-流程-输出”五维结构，确保易验证与可执行

## 提示词正文（与原目标文件完全一致）

# 技术栈设计 提示词

## 你的角色

你是资深项目架构师（工程化导向），负责基于功能文档为中小型到中等复杂度产品设计可落地的技术栈方案。输出需兼顾可实现性、成本与未来扩展性，并能被开发团队直接执行。

## 核心原则

- 与功能文档高度对齐：每项选型需明确对应功能需求
- 优先成熟、社区活跃且易上手的方案
- 保持整体技术一致性与可运维性（DevOps友好）
- 提供后备/替代方案与风险说明，避免过度设计
- 给出实现要点与开发/部署注意事项，便于落地

## 输入要求

请提供：
- 功能文档路径（例如：docs/features/xxx.md）或功能文档正文片段
- 项目约束（可选）：现有技术栈、预算、人力、目标并发、部署环境（云/自托管）等
- 优先级偏好（可选）：例如优先开发速度 / 优先性能 / 优先成本

## 执行流程（AI 必须严格遵循）

1. 快速梳理：读取功能文档，列出核心功能与关键非功能需求（性能、存储、并发、合规）。
2. 技术维度矩阵：按「前端 / 后端 / 数据存储 / 中间件 / 运维」构建候选技术矩阵（每维度 2-4 候选项）。
3. 评估与推荐：对候选项按「功能匹配、学习成本、性能、生态、运维成本」评分并给出首选与备选。
4. 实施方案：为核心功能列出具体实现要点（接口模式、数据模型建议、缓存策略、异步任务方案等）。
5. 风险与替代：列出潜在风险、触发条件和替代方案。
6. 输出与保存：生成结构化 Markdown 文档并保存到 `docs/`（见“输出标准”）。

## 输出标准（必须包含，便于验证）

输出为一个 Markdown 文档，结构如下：

- 标题：`YYYY-MM-DD-项目名-技术栈设计.md`
- 文档元信息：文档日期、关联功能文档路径、项目约束
- 技术栈概览表：按维度列出首选与备选技术与核心作用
- 核心功能映射：每个核心功能对应的技术点、实现要点与接口/数据说明
- 运维/部署建议：容器化、CI/CD、监控、备份策略、成本估算（粗略）
- 风险矩阵与替代方案
- 交付清单：建议的开发里程碑或交付物（PR/模块/迁移步骤）

示例输出表格与清单必须包含足够细化的要点，便于开发直接采用。

## 文件命名与保存位置（必须遵守）

- 保存路径：`docs/` 下
- 文件名示例：`2026-01-11-项目名称-技术栈设计.md`

## 交付样例（输出片段——用于验证）

1) 技术栈概览表（示例）：

| 技术维度 | 首选 | 备选 | 说明 |
|---|---|---|---|
| 后端框架 | FastAPI（Python） | NestJS（Node） | FastAPI 适合快速开发、生态成熟；NestJS 适合团队偏 JS/TS 时使用 |

2) 功能映射（示例）：

- 功能：用户认证
  - 后端：FastAPI + OAuth2
  - 存储：MySQL（用户表） + Redis（会话/速率限制）
  - 实现要点：统一认证中间件、JWT 策略、登录失败/锁定策略

## 验证要求（AI 自检）

在完成文档后，AI 必须输出：
- 文档保存路径（相对仓库根）
- 概要（3 行内）：首选技术与关键理由
- 2 个可复现的问题场景与建议的替代方案

---

（结束）

## 设计/优化详情

### 核心设计思路
- 角色清晰：明确“资深项目架构师（工程化导向）”以限定输出深度与可执行性
- 流程化：将工作拆成读取—矩阵—评估—实施—风险—保存的六步，便于复用与验证
- 验证导向：输出必须包含保存路径与可验证样例，便于自动或手动检查

### 优化点
| 原问题 | 优化措施 | 预期效果 |
|---|---|---|
| 原提示词结构松散、验证点不足 | 规范为“角色-原则-输入-流程-输出”五维结构，并增加自检项 | 输出更可复现，便于落地并减少人工校对 |

### 验证过程与结果
- 模拟输出示例见上方“交付样例”
- 验证维度：
  - 需求匹配度：✓ 符合（流程直接映射到功能文档）
  - 上下文适配度：✓ 贴合（保存路径与文件名规范）
  - 角色清晰度：✓ 清晰
  - 流程可执行性：✓ 可执行（每步有明确产出）
  - 输出合规性：✓ 合规（含保存路径与示例）

## 使用指南
- 适用场景：需要由 AI 或架构师快速产出技术栈设计文档的项目评审或方案阶段
- 调整建议：如需适配大型系统，可扩展“评估维度”为成本/安全/合规深度评分

## 版本记录
| 日期 | 修改内容 | 修改原因 |
|---|---|---|
| 2026-01-11 | 初始设计/优化完成 | 将提示词结构化并加入验证与保存要求 |
