# 项目结构设计 提示词（设计/优化）完整报告

## 报告日期
2026-01-11

## 核心需求
为智能体提供两种方式：①原来不存在项目结构文档，则直接创建新文档；②原来存在，则在原来的文档中进行更新（增量更新）。

## 目标文件上下文详情
- 文件路径：.github/prompts/design-program-structure.prompt.md
- 文件用途：该提示词用于自动化生成项目结构设计文档，适配前端、后端或全栈项目，供架构设计和项目启动使用。
- 上下文核心：基于技术栈与项目基本信息，输出结构化的项目目录建议、关键文件说明与扩展方案。
- 适配逻辑：提示词设计普适适配前端/后端，并提供按规模的可选复杂度方案。

<!-- Prompt Body Removed -->

**（提示词正文已同步至目标文件，此处不再冗余展示）**

## 设计/优化详情

### 核心设计思路
- **双模式逻辑**：在执行流程首步增加“环境探测”，区分“新建”与“更新”路径。
- **更新策略**：明确“更新模式”下需读取旧文档、分析差异、仅输出变更部分，并强制维护版本记录。
- **Frontmatter适配**：添加了标准的 YAML frontmatter 以适配 Agent 平台。

### 优化点
| 原提示词问题 | 优化方案 | 优化效果 |
|---|---|---|
| 默认只假设新建文档 | 增加“环境探测与模式选择”步骤 | 智能判断是新建还是更新 |
| 缺乏版本控制意识 | 强制要求更新时追加“版本记录” | 确保文档演进可追溯 |
| 缺少 Frontmatter | 添加 YAML 头部 | 符合平台规范，支持工具定义 |

### 验证过程与结果
- 模拟输出示例：
  *(省略，见实际执行结果)*
- 验证维度：
  - 需求匹配度：✓ 符合（支持新建/更新双模式）
  - 上下文适配度：✓ 贴合（自动探测 docs 目录）
  - 流程可执行性：✓ 可执行（逻辑分支清晰）

## 使用指南
- 适用场景：新项目启动、现有项目结构重构、给外包团队提供交付模板；
- 调整建议：按项目规模调整模块深度，替换具体技术栈对应的配置与构建文件；
- 常见问题：缺少技术栈信息时优先生成通用模板并提示补充关键项。

## 版本记录
|日期|修改内容|修改原因|
|---|---|---|
|2026-01-11|初始设计/优化完成|将原后端专用提示词扩展为通用“项目结构设计”提示词|
|2026-01-11|增加“新建/更新”双模式|满足用户关于文档增量更新的核心需求|
